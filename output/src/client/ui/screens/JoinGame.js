// Generated by Melange

import * as Caml_option from "melange.js/caml_option.js";
import * as Components__Layout from "../components/Layout/Layout.js";
import * as Components__Modal from "../components/Modal/Modal.js";
import * as Curry from "melange.js/curry.js";
import * as Fetch from "melange-fetch/Fetch.js";
import * as Patterns__JoinGameForm from "../patterns/JoinGameForm/JoinGameForm.js";
import * as Router from "../../router/Router.js";
import * as Shared_api_client from "../../../shared/api/client/shared_api_client.js";
import * as Shared_api_universal__Routes from "../../../shared/api/universal/routes/Routes.js";
import * as Shared_api_universal__Routes__Routes_Builder from "../../../shared/api/universal/routes/Routes_Builder.js";
import * as JsxRuntime from "react/jsx-runtime";

function JoinGame(Props) {
  let gameId = Props.gameId;
  const joinGame = function (typ, name) {
    const data = JSON.stringify(Curry._1(Shared_api_client.Api.write_join_game_request, {
              join_game_typ: typ,
              join_game_name: name
            }));
    fetch(Curry._1(Shared_api_universal__Routes__Routes_Builder.sprintf(Shared_api_universal__Routes.join_game(undefined)), gameId), Curry._2(Fetch.RequestInit.make(/* Post */2, undefined, Caml_option.some(data), undefined, undefined, undefined)(/* SameOrigin */1, undefined, undefined, undefined, undefined), undefined, undefined)).then(function (param) {
          return Promise.resolve(Router.push({
                          TAG: /* Play */1,
                          _0: gameId
                        }));
        });
  };
  return JsxRuntime.jsx(Components__Layout.make, {
              children: JsxRuntime.jsx(Components__Layout.Content.make, {
                    children: JsxRuntime.jsx(Components__Modal.make, {
                          isOpen: true,
                          onClose: undefined,
                          children: JsxRuntime.jsx(Patterns__JoinGameForm.make, {
                                onSubmit: joinGame
                              })
                        })
                  })
            });
}

const make = JoinGame;

export {
  make ,
}
/* Components__Layout Not a pure module */
